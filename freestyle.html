
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"

"http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link href="./style.css" type="text/css" rel="stylesheet">
  <link href="./shopping.css" type="text/css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <title>ShopRite - Learn</title>

  <!-- non BigSemantics include statements -->

  <!-- bsjsCore Files. You must include them in this order so as to use any BigSemantics porject -->
  <!-- Readyable is a class used to handle the asynchronous load time of the BS project
  BSAutoSwitch is an interface to BigSemantics that can switch between using the lab's hosted service for metadata
  and using a browser-installed extension. BSService and BSSExtension are implementations -->
  <script type="text/javascript" src="../BigSemanticsJavaScript/bsjsCore/Readyable.js"></script>
  <script type="text/javascript" src="../BigSemanticsJavaScript/bsjsCore/BSAutoSwitch.js"></script>
  <script type="text/javascript" src="../BigSemanticsJavaScript/bsjsCore/BSService.js"></script>
  <script type="text/javascript" src="../BigSemanticsJavaScript/bsjsCore/BSExtension.js"></script>
  <!-- BSUtils, Downloader, ParsedURL, and simplBase are helper classes. Include them, but don't really worry about them-->
  <script type="text/javascript" src="../BigSemanticsJavaScript/bsjsCore/BSUtils.js"></script>
  <script type="text/javascript" src="../BigSemanticsJavaScript/bsjsCore/ParsedURL.js"></script>
  <script type="text/javascript" src="../BigSemanticsJavaScript/bsjsCore/Downloader.js"></script>
  <script type="text/javascript" src="../BigSemanticsJavaScript/bsjsCore/simpl/simplBase.js"></script>
  <!--
  RepoMan loads a Meta-metadata repository. Avoid doing anything with it directly; it's messy-->
  <script type="text/javascript" src="../BigSemanticsJavaScript/bsjsCore/RepoMan.js"></script>

  <!--Webpage-specific javascript and CSS includes-->
  <script type="text/javascript" src="./engine.js"></script>
  <script type="text/javascript" src="./scratchpad.js"></script>
</head>


<!-- Upon the page being loaded, the onLoad function in demo.js will be called-->
<body onload="onLoad()">
  <nav class="navbar navbar-default navbar-fixed-top" style="margin-bottom=0">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="index.html"><img id="logo" src="res/logo.png" alt="ShopRite"></a>
      </div>
      <ul class="nav navbar-nav">
        <li><a href="learn.html">Learning</a></li>
        <li class="active"><a href="freestyle.html">Shop</a></li>
        <li><a href="compare.html">Compare</a></li>
      </ul>
    </div>
  </nav>
  <div id="content">
    <aside id="nav">
      <section class="side-box">
        <h2>Filters</h2>
        <div id="filters">
          <script>constructFilters();</script>
        </div>
      </section>
    </aside>
    <main>
      <div class="callbackMessageHolder">
        <img class="loadingGifOfDoom" src="./res/loading.gif" alt="Loading">
      </div>
      <div id="browse-content">
        <ul id="item-list">
        </ul>
      </div>
      <div id="error-output">
      </div>
    </main>
    <aside id="pers">
      <section class="side-box" ondragover="allowDrop(event)" ondrop="dropItem(event)">
        <h2 ondragover="" ondrop="">Personal</h2>
        <div id="scratchpad">
          <p ondragover="" ondrop="">Think of this section as your personal scratch paper.
            Type your own notes or drop text directly from the page to save
            clippings for later anywhere. You can also drag laptop models here to
            set them aside for comparison later.
          </p>
        </div>
      </section>
      <script>loadSideItems();</script>
    </aside>
  </div>

  <!-- Modal -->
  <div id="laptopModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body">
          <div class="center-contents">
            <img align=>
            <h5 id=neweggRating></h5>
          </div>
          <table class="table table-striped">
            <tbody>
              <tr>
                <td>Price</td>
                <td id=laptopPrice></td>
              </tr>
              <tr>
                <td>Brand</td>
                <td id=laptopBrand></td>
              </tr>
              <tr>
                <td>Operating System</td>
                <td id=laptopOS></td>
              </tr>
              <tr>
                <td>CPU</td>
                <td id=laptopCPU></td>
              </tr>
              <tr>
                <td>Screen</td>
                <td id=laptopScreen></td>
              </tr>
              <tr>
                <td>Memory</td>
                <td id=laptopMemory></td>
              </tr>
              <tr>
                <td>Storage</td>
                <td id=laptopStorage></td>
              </tr>
              <tr>
                <td>Graphics Card</td>
                <td id=laptopGPU></td>
              </tr>
              <tr>
                <td>Video Memory</td>
                <td id=laptopGPUMem></td>
              </tr>
              <tr>
                <td>Weight</td>
                <td id=laptopWeight></td>
              </tr>
              <tr>
                <td>Resolution</td>
                <td id=laptopResolution></td>
              </tr>
              <tr>
                <td>Touchscreen</td>
                <td id=laptopTouchscreen></td>
              </tr>
              <tr>
                <td>Battery Life</td>
                <td id=laptopBattery></td>
              </tr>
              <tr>
                <td>Style</td>
                <td id=laptopStyle></td>
              </tr>
            </tbody>
          </table>
          <div class="center-contents">
            <a id=laptopMagReview>LaptopMag Review</a>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
        <script>
        $('#laptopModal').on('show.bs.modal', function (event) { // id of the modal with event
            var itemIndex = $(event.relatedTarget).data('product-index'); // Item that triggered the modal
            var item;
            if ($(event.relatedTarget).data('source') == null) {
              item = working_items[itemIndex];
            } else {
              item = Array.from(sidebarItems)[itemIndex];
            }
            var title = item.laptopTitle();

            // Update the modal's spec content.
            var modal = $(this)
            modal.find('.modal-title').text(title);
            modal.find('img').attr({'src':item.imageUrl,'alt':item.laptopTitle()});
            var ratingString;
            if (!isNaN(Number(item.rating))) {
              ratingString = item.rating+"/5 (" + item.reviewCount+" reviews)";
            }
            else {
              ratingString = "Not Rated";
            }
            $('#neweggRating').text("Rating: "+ratingString);
            $("#laptopPrice").text("$"+item.price);
            $('#laptopBrand').text(item.brand);
            $('#laptopOS').text(item.os);
            $('#laptopCPU').text(item.cpu);
            $('#laptopScreen').text(item.screen);
            $('#laptopMemory').text(item.memory);
            $('#laptopStorage').text(item.storage);
            $('#laptopGPU').text(item.gpu);
            $('#laptopGPUMem').text(item.gpuMem);
            $('#laptopWeight').text(item.weight);
            $('#laptopResolution').text(item.resolution);
            $('#laptopTouchscreen').text(item.touchscreen);
            $('#laptopBattery').text(item.battery);
            $('#laptopStyle').text(item.hwStyle);

            if (item.series != null) {
              var queryString = item.brand+'+'+item.series.replace(" ", "+");
              var fullUrl="http://www.laptopmag.com/search?q="+queryString;
              $('#laptopMagReview').attr('href',fullUrl);
            }
          });
        </script>
      </div>
    </div>
  </div>
</body>
</html>
